<% layout("owner/adminLayout") %>

<% pageTitle = "Applications" %>
<% pageSubtitle = "All submitted resumes" %>

<div class="table-glass">
  <table class="table table-hover mb-0">
    <thead>
      <tr>
        <th>Name</th><th>Email</th><th>Phone</th><th>Applied For</th><th>Applied On</th><th>View</th><th>Delete</th>
      </tr>
    </thead>
    <tbody>
      <% applications.forEach(app => { %>
        <tr>
          <td><%= app.name %></td>
          <td><%= app.email %></td>
          <td><%= app.phone %></td>
          <td><%= app.jobId ? app.jobId.jobTitle : "General" %></td>
          <td><%= app.appliedAt ? app.appliedAt.toLocaleString() : "" %></td>
          <td><a href="/admin/resume/<%= app._id %>/view" class="btn btn-sm btn-primary">View</a></td>
          <td>
            <form action="/admin/resume/<%= app._id %>/delete?_method=DELETE" method="POST" onsubmit="return confirm('Delete application?');">
              <button class="btn btn-sm btn-danger">Delete</button>
            </form>
          </td>
        </tr>
      <% }) %>
    </tbody>
  </table>
</div>
